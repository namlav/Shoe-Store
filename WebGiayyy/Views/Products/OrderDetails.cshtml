@model WebGiayyy.Models.Order

@{
    ViewBag.Title = "OrderDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="container mt-4">

    <h3 class="mb-4">
        <i class="fas fa-receipt"></i> Chi tiết đơn hàng #@Model.OrderId
    </h3>

    <!-- Thông tin khách hàng -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header fw-bold">
            Thông tin khách hàng
        </div>
        <div class="card-body">
            <p><strong>Họ tên:</strong> @Model.CustomerName</p>
            <p><strong>Số điện thoại:</strong> @Model.Phone</p>
            <p><strong>Địa chỉ:</strong> @Model.AddressLine</p>
            <p>
                <strong>Trạng thái:</strong>
                <span class="badge bg-warning text-dark">@Model.Status</span>
            </p>
            <p>
                <strong>Ngày đặt:</strong>
                @Model.CreatedAt
            </p>
        </div>
    </div>

    <!-- Danh sách sản phẩm -->
    <div class="card shadow-sm">
        <div class="card-header fw-bold">
            Sản phẩm đã đặt
        </div>

        <div class="table-responsive">
            <table class="table table-bordered align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Ảnh</th>
                        <th>Sản phẩm</th>
                        <th class="text-center">SL</th>
                        <th class="text-end">Đơn giá</th>
                        <th class="text-end">Thành tiền</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.OrderItems)
                    {
                        <tr>
                            <td width="90">
                                <img src="~/Images/@item.Product.MainImage"
                                     class="img-fluid rounded"
                                     style="max-height:70px;">
                            </td>
                            <td>
                                <div class="fw-semibold">@item.ProductName</div>
                            </td>
                            <td class="text-center">
                                @item.Quantity
                            </td>
                            <td class="text-end">
                                @item.UnitPrice ₫
                            </td>
                            <td class="text-end fw-bold text-danger">
                                @( (item.UnitPrice ?? 0) * (item.Quantity ?? 0) ) ₫
                            </td>
                        </tr>
                    }
                </tbody>
                <tfoot>
                    <tr>
                        <th colspan="4" class="text-end">Tổng cộng:</th>
                        <th class="text-end text-danger">
                            @Model.TotalAmount₫
                        </th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

    <div class="mt-4">
        <a href="@Url.Action("Cart","Products")"
           class="btn btn-secondary">
            ← Quay lại giỏ hàng
        </a>
    </div>

</div>
